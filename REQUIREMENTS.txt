Project requirements and setup notes for the Heatmap project

This file lists system, runtime, and project-level requirements and quick setup/run commands.

1) System / runtime
- Node.js: 18.x or 20.x (LTS recommended)
- npm: v9+ (bundled with modern Node.js)
- PostgreSQL: 12+ (13/14 recommended)
- Git (for cloning)
- Optional but recommended: psql CLI (for running SQL/migrations)

2) Environment variables (backend/.env)
Create `backend/.env` with the following keys (DO NOT commit this file into git):

DATABASE_URL=postgresql://<user>:<password>@<host>:<port>/<dbname>
LOCAL_DB_URL=postgresql://<user>:<password>@<host>:<port>/<dbname>
PORT=2000
GEMINI_API_KEY=your_gemini_api_key_here  # optional if using Gemini proxy
FRONTEND_ORIGIN=http://localhost:5173
SEED_COUNT=1000
USE_POSTGIS=true

3) Database schema and seed
- The SQL file that creates the DB schema and seeds initial data is: `backend/sql/create_zone_info.sql`.
- To create the database and run the script with psql:
  - Create DB (if needed): `createdb heatmap_final` (or run inside psql)
  - Run the SQL file: `psql -d heatmap_final -f backend/sql/create_zone_info.sql`
- Alternatively, adjust `createTables.js` (if present) to run migrations programmatically.

4) Backend (node) requirements and commands
- Main folder: `heatmap-project/backend`
- Install dependencies:
  cd backend
  npm install

- Common scripts (see backend/package.json):
  npm run dev   # runs nodemon server.js (development)
  npm start     # runs node server.js (production)
  npm test      # (if present) runs backend tests (Jest + Supertest)

- Notes:
  - The backend expects a running Postgres instance pointed at DATABASE_URL / LOCAL_DB_URL.
  - The backend uses `express`, `pg`, and `cors`.
  - When running tests, the code includes mocks so you can run tests without a live DB (but integration tests may require one).

5) Frontend (node + Vite) requirements and commands
- Main folder: `heatmap-project/frontend`
- Install dependencies:
  cd frontend
  npm install
  # If peer-dependency conflicts occur with your npm version, try `npm install --legacy-peer-deps` (not recommended as default).

- Common scripts (see frontend/package.json):
  npm run dev    # start Vite dev server (http://localhost:5173)
  npm run build  # build production assets
  npm run preview
  npm test       # (if present) runs frontend tests (Vitest + Testing Library)

6) Optional dev/test tooling (may be in package.json devDependencies)
- nodemon
- jest, supertest (backend tests)
- vitest, @testing-library/react, @testing-library/jest-dom (frontend tests)

7) Ports and URLs used during development
- Backend: http://localhost:2000 (PORT variable)
- Frontend (Vite): http://localhost:5173
- Backend API endpoints used by frontend:
  - GET /api/zones
  - GET /api/zone-info/:zoneName
  - POST /api/zone-info/:zoneName/exhibit
  - DELETE /api/zone-info/:zoneName/exhibit/:id
  - POST /api/search-zone

8) Quick start (development)
1. Start Postgres locally and ensure DATABASE_URL/LOCAL_DB_URL points to a valid DB.
2. Apply SQL schema/seeds:
   psql -d heatmap_final -f backend/sql/create_zone_info.sql
3. Start backend:
   cd backend
   npm install
   npm run dev
4. Start frontend in separate terminal:
   cd frontend
   npm install
   npm run dev
5. Open browser: http://localhost:5173

9) Troubleshooting tips
- If backend cannot connect to DB: double-check `backend/.env`, ensure Postgres service is running and network access allowed.
- If frontend cannot reach backend due to CORS: ensure `FRONTEND_ORIGIN` is set and the backend `cors()` policy allows the origin.
- If npm install fails due to peer deps: try `npm install --legacy-peer-deps` (temporary workaround) or use Node.js version matching package expectations.

10) Recommended improvements (for production)
- Use a secret manager (do NOT store real keys in `.env` in production).
- Add server-side authentication and RBAC for admin actions.
- Replace polling with Server-Sent Events or WebSockets for real-time updates if needed.
- Add CI tests and use a Dockerized Postgres for integration test runs.

11) Contacts & notes
- Project structure (top-level):
  - backend/  (Node/Express + Postgres SQL)
  - frontend/ (Vite + React)
  - rfid-sync/ (worker script)

-- End of REQUIREMENTS --
